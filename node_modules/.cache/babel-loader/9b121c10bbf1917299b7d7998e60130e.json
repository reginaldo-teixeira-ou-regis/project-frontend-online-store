{"ast":null,"code":"var _jsxFileName = \"/home/reginaldoteixeira/github-directory/github-project-trybe/sd-026-b-project-frontend-online-store/src/pages/ProductList.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getCategories, getProductsFromCategoryAndQuery } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class ProductList extends Component {\n  constructor() {\n    var _this;\n\n    super(...arguments);\n    _this = this;\n    this.state = {\n      isEmpty: true,\n      categories: [],\n      category: '',\n      inputSearch: '',\n      products: '',\n      isSearched: false,\n      cartItems: localStorage.cartItems ? JSON.parse(localStorage.cartItems) : []\n    };\n\n    this.handleChange = function (_ref) {\n      let {\n        target\n      } = _ref;\n      let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : () => {};\n      const {\n        name,\n        value\n      } = target;\n\n      _this.setState({\n        [name]: value\n      }, callback);\n    };\n\n    this.handleProductsExhibition = async () => {\n      const {\n        inputSearch,\n        category\n      } = this.state;\n      const responseAPI = await getProductsFromCategoryAndQuery(category, inputSearch);\n      this.setState({\n        isEmpty: false,\n        products: responseAPI.results,\n        isSearched: true\n      });\n    };\n\n    this.loadCategories = () => {\n      getCategories().then(data => this.setState({\n        categories: data\n      }));\n    };\n\n    this.saveCartItem = _ref2 => {\n      let {\n        target\n      } = _ref2;\n      const {\n        products,\n        cartItems\n      } = this.state;\n      const getItem = products.find(item => item.id === target.id);\n      const hadItem = cartItems.some(item => item.id === getItem.id);\n\n      if (!hadItem) {\n        cartItems.push(getItem);\n        localStorage.cartItems = JSON.stringify(cartItems);\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.loadCategories();\n  }\n\n  render() {\n    const {\n      isEmpty,\n      categories,\n      products,\n      isSearched,\n      inputSearch\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/shopping-cart\",\n        \"data-testid\": \"shopping-cart-button\",\n        children: \"Carrinho de Compra\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        \"data-testid\": \"query-input\",\n        name: \"inputSearch\",\n        value: inputSearch,\n        type: \"text\",\n        onChange: this.handleChange,\n        placeholder: \"Digite aqui\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        \"data-testid\": \"query-button\",\n        type: \"button\",\n        onClick: this.handleProductsExhibition,\n        children: \"Salvar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), categories.map(_ref3 => {\n        let {\n          id,\n          name\n        } = _ref3;\n        return /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: id,\n          \"data-testid\": \"category\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"category\",\n            id: id,\n            value: id,\n            onChange: event => this.handleChange(event, this.handleProductsExhibition)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this), name]\n        }, id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this);\n      }), isEmpty && /*#__PURE__*/_jsxDEV(\"p\", {\n        \"data-testid\": \"home-initial-message\",\n        children: \"Digite algum termo de pesquisa ou escolha uma categoria.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }, this), isSearched && (products.length > 0 ? products.map(_ref4 => {\n        let {\n          id,\n          title,\n          thumbnail,\n          price,\n          shipping\n        } = _ref4;\n        return (\n          /*#__PURE__*/\n          // Coloquei Link dentro de uma div afim de inserir um botão de adicionar ao carrinho\n          // O atributo Key foi realocado para a div pai pois não há necessidade de mante-lá duplicada\n          // Coloquei div de produtos em Link\n          _jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              \"data-testid\": \"product-detail-link\",\n              to: `/items/${id}`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                \"data-testid\": \"product\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: thumbnail,\n                  alt: title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: price\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 21\n                }, this), shipping[FREESHIPPING] && /*#__PURE__*/_jsxDEV(\"p\", {\n                  \"data-testid\": \"free-shipping\",\n                  children: \"Frete gr\\xE1tis\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 26\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              \"data-testid\": \"product-add-to-cart\",\n              type: \"button\",\n              id: id,\n              onClick: this.saveCartItem,\n              children: \"Adicionar ao carrinho\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 17\n            }, this)]\n          }, id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this)\n        );\n      }) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Nenhum produto foi encontrado\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"names":["React","Component","Link","getCategories","getProductsFromCategoryAndQuery","ProductList","state","isEmpty","categories","category","inputSearch","products","isSearched","cartItems","localStorage","JSON","parse","handleChange","target","callback","name","value","setState","handleProductsExhibition","responseAPI","results","loadCategories","then","data","saveCartItem","getItem","find","item","id","hadItem","some","push","stringify","componentDidMount","render","map","event","length","title","thumbnail","price","shipping","FREESHIPPING"],"sources":["/home/reginaldoteixeira/github-directory/github-project-trybe/sd-026-b-project-frontend-online-store/src/pages/ProductList.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getCategories, getProductsFromCategoryAndQuery } from '../services/api';\n\nexport default class ProductList extends Component {\n  state = {\n    isEmpty: true,\n    categories: [],\n    category: '',\n    inputSearch: '',\n    products: '',\n    isSearched: false,\n    cartItems: localStorage.cartItems\n      ? JSON.parse(localStorage.cartItems)\n      : [],\n  };\n\n  componentDidMount() {\n    this.loadCategories();\n  }\n\n  handleChange = ({ target }, callback = () => {}) => {\n    const { name, value } = target;\n    this.setState({\n      [name]: value,\n    }, callback);\n  };\n\n  handleProductsExhibition = async () => {\n    const { inputSearch, category } = this.state;\n    const responseAPI = await getProductsFromCategoryAndQuery(category, inputSearch);\n    this.setState({\n      isEmpty: false,\n      products: responseAPI.results,\n      isSearched: true,\n    });\n  };\n\n  loadCategories = () => {\n    getCategories().then((data) => this.setState({\n      categories: data,\n    }));\n  };\n\n  saveCartItem = ({ target }) => {\n    const { products, cartItems } = this.state;\n    const getItem = products.find((item) => item.id === target.id);\n    const hadItem = cartItems.some((item) => item.id === getItem.id);\n    if (!hadItem) {\n      cartItems.push(getItem);\n      localStorage.cartItems = JSON.stringify(cartItems);\n    }\n  };\n\n  render() {\n    const { isEmpty, categories, products, isSearched, inputSearch } = this.state;\n    return (\n      <div>\n        <Link to=\"/shopping-cart\" data-testid=\"shopping-cart-button\">\n          Carrinho de Compra\n        </Link>\n        <input\n          data-testid=\"query-input\"\n          name=\"inputSearch\"\n          value={ inputSearch }\n          type=\"text\"\n          onChange={ this.handleChange }\n          placeholder=\"Digite aqui\"\n        />\n        <button\n          data-testid=\"query-button\"\n          type=\"button\"\n          onClick={ this.handleProductsExhibition }\n        >\n          Salvar\n        </button>\n        {\n          categories.map(({ id, name }) => (\n            <label\n              htmlFor={ id }\n              key={ id }\n              data-testid=\"category\"\n            >\n              <input\n                type=\"radio\"\n                name=\"category\"\n                id={ id }\n                value={ id }\n                onChange={ (event) => (\n                  this.handleChange(event, this.handleProductsExhibition)\n                ) }\n              />\n              { name }\n            </label>\n          ))\n        }\n        {isEmpty\n          && (\n            <p data-testid=\"home-initial-message\">\n              Digite algum termo de pesquisa ou escolha uma categoria.\n            </p>\n          )}\n        {isSearched && ((products.length > 0)\n          ? (\n            products.map(({ id, title, thumbnail, price, shipping }) => (\n              // Coloquei Link dentro de uma div afim de inserir um botão de adicionar ao carrinho\n              // O atributo Key foi realocado para a div pai pois não há necessidade de mante-lá duplicada\n              // Coloquei div de produtos em Link\n              <div key={ id }>\n                <Link\n                  data-testid=\"product-detail-link\"\n                  to={ `/items/${id}` }\n                >\n                  <div\n                    data-testid=\"product\"\n                  >\n                    <h3>{ title }</h3>\n                    <img src={ thumbnail } alt={ title } />\n                    <p>{ price }</p>\n                    { shipping[FREESHIPPING]\n                      && <p data-testid=\"free-shipping\">Frete grátis</p>}\n                  </div>\n                </Link>\n                <button\n                  data-testid=\"product-add-to-cart\"\n                  type=\"button\"\n                  id={ id }\n                  onClick={ this.saveCartItem }\n                >\n                  Adicionar ao carrinho\n                </button>\n              </div>\n            ))\n          )\n          : (\n            <p>\n              Nenhum produto foi encontrado\n            </p>\n          ))}\n      </div>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}